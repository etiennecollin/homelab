---
services:
  diun:
    image: "crazymax/diun:4.29.0"
    container_name: "diun"
    restart: "unless-stopped"
    command: "serve"
    volumes:
      - "./config:/data"
    environment:
      TZ: "${TIMEZONE}"
      DIUN_WATCH_WORKERS: "20"
      DIUN_WATCH_SCHEDULE: "0 */6 * * *"
      DIUN_WATCH_JITTER: "30s"
      DIUN_PROVIDERS_DOCKER: "true"
      DIUN_PROVIDERS_DOCKER_ENDPOINT: "tcp://socket-proxy:2375"
      DIUN_PROVIDERS_DOCKER_WATCHBYDEFAULT: "true"
      DIUN_NOTIF_DISCORD_MENTIONS: "@here"
    env_file:
      - "./secret.env"
    labels:
      - "diun.enable=true"
    networks:
      - "socket-proxy"

networks:
  socket-proxy:
    external: "true"
